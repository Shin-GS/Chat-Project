<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en"
      th:lang="${#locale.toLanguageTag()}">
<body>
<!-- Title (always rendered; toggle font weight via th:class) -->
<!--/*@thymesVar id="conversation" type="com.chat.server.service.conversation.response.ConversationInfoAndMessageResponse"*/-->
<div th:fragment="title(conversation)"
     th:id="'sidebar-content-' + ${conversation.id} + '-title'"
     hx-swap-oob="true">
  <span th:text="${conversation.title} ?: #{ui.conversation_list.untitled}"
        th:class="${(conversation.lastMessage != null and conversation.lastMessage != '' and !conversation.read)
                   ? 'flex-1 min-w-0 truncate font-extrabold text-gray-900 text-[15px] sm:text-base'
                   : 'flex-1 min-w-0 truncate font-semibold text-gray-900 text-[15px] sm:text-base'}">
    Untitled conversation
  </span>
</div>

<!-- Read double-check container (always rendered; icon inside is conditional) -->
<!--/*@thymesVar id="conversation" type="com.chat.server.service.conversation.response.ConversationInfoAndMessageResponse"*/-->
<div th:fragment="read-check(conversation)"
     th:id="'sidebar-content-' + ${conversation.id} + '-read'"
     hx-swap-oob="true"
     class="flex items-center gap-1">
    <svg th:if="${conversation.lastMessage != null and conversation.lastMessage != '' and conversation.read}"
         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
         fill="none" stroke="currentColor" stroke-width="2"
         class="w-4 h-4 text-blue-500"
         th:attr="aria-label=#{aria.read}"
         aria-label="Read">
        <!-- simple double check -->
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l4 4 6-6"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l4 4 8-8"/>
    </svg>
</div>

<!-- Unread dot badge (always rendered; toggle hidden vs inline-flex via th:class) -->
<!--/*@thymesVar id="conversation" type="com.chat.server.service.conversation.response.ConversationInfoAndMessageResponse"*/-->
<span th:fragment="unread-dot(conversation)"
      th:id="'sidebar-content-' + ${conversation.id} + '-unread'"
      hx-swap-oob="true"
      th:class="${(conversation.lastMessage != null and conversation.lastMessage != '' and !conversation.read)
                 ? 'shrink-0 relative inline-flex items-center justify-center w-2.5 h-2.5 rounded-full bg-blue-500'
                 : 'shrink-0 relative hidden w-2.5 h-2.5 rounded-full bg-blue-500'}"
      th:attr="aria-label=#{aria.unread}"
      aria-label="Unread">
  <span class="sr-only" th:text="#{aria.unread}">Unread</span>
</span>
</body>
</html>
