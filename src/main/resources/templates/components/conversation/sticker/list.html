<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" th:lang="${#locale.toLanguageTag()}">
<body>
<!--/*@thymesVar id="packs" type="java.util.List<com.chat.server.service.conversation.response.ConversationStickerPackResponse>"*/-->
<!--/*@thymesVar id="conversationId" type="com.chat.server.domain.vo.ConversationId"*/-->

<section th:fragment="sticker-panel"
         id="sticker-panel"
         class="mt-3 border border-gray-200 rounded-lg bg-white/80"
         hx-swap-oob="true"
         aria-label="Sticker panel">
    <div class="flex flex-col sm:flex-row gap-3 p-3">
        <!-- Packs list -->
        <aside class="sm:w-56 shrink-0">
            <div class="flex items-center justify-between mb-2">
                <h3 class="text-sm font-semibold text-gray-900">Sticker Packs</h3>
                <span class="text-xs text-gray-500" th:text="${#lists.size(packs)} + ' packs'">0 packs</span>
            </div>

            <ul id="sticker-pack-list"
                class="divide-y divide-gray-200 border border-gray-200 rounded-lg overflow-hidden bg-white">
                <li th:if="${#lists.isEmpty(packs)}" class="px-3 py-2 text-sm text-gray-500">
                    No sticker packs available
                </li>

                <li th:each="p : ${packs}"
                    th:with="disabled=${p.count() == 0}"
                    th:attr="data-pack-id=${p.id()}"
                    class="px-3 py-2 flex items-center justify-between gap-2 hover:bg-gray-50"
                    role="button"
                    tabindex="0"
                    th:classappend="${disabled} ? ' opacity-50 cursor-not-allowed' : ' cursor-pointer'"
                    th:attrappend="aria-disabled=${disabled}"
                    th:attr="hx-get=@{|/hx/conversations/messages/stickers/${p.id()}|}, hx-target=#sticker-grid,
                     hx-swap='innerHTML'">
                    <div class="min-w-0">
                        <div class="text-sm font-medium text-gray-800 truncate" th:text="${p.name() ?: p.category()}">
                            Animals
                        </div>
                        <div class="text-xs text-gray-500" th:text="${p.category()}">animals</div>
                    </div>
                    <span class="inline-flex items-center justify-center text-xs bg-gray-100 text-gray-700 rounded px-2 py-0.5"
                          th:text="${p.count()} + ' items'">0 items</span>
                </li>
            </ul>
        </aside>

        <!-- Stickers grid -->
        <main class="flex-1 min-w-0">
            <div class="flex items-center justify-between mb-2">
                <h3 id="sticker-grid-title" class="text-sm font-semibold text-gray-900">Stickers</h3>
                <button type="button"
                        class="text-xs text-gray-600 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1"
                        aria-label="Refresh stickers"
                        hx-get="/hx/conversations/messages/stickers"
                        hx-target="#sticker-panel"
                        hx-swap="outerHTML">
                    Refresh
                </button>
            </div>

            <!-- target container the grid fragment will replace -->
            <div id="sticker-grid"
                 class="border border-gray-200 rounded-lg bg-white min-h-24 p-3"
                 aria-live="polite"
                 aria-busy="false">
                <!-- Default empty hint before a pack is chosen -->
                <p class="text-sm text-gray-500">Choose a sticker pack to view its stickers</p>
            </div>
        </main>
    </div>
</section>
</body>
</html>
