<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en"
      th:lang="${#locale.toLanguageTag()}">
<body>
<!--/*@thymesVar id="type" type="com.chat.server.common.constant.conversation.ConversationType"*/-->
<section th:fragment="participant"
         id="conversation-participant-list"
         hx-swap-oob="true"
         class="mt-2">
    <th:block th:if="${type != null && type == T(com.chat.server.common.constant.conversation.ConversationType).GROUP}">
        <!--/*@thymesVar id="participants" type="java.util.List<com.chat.server.service.conversation.response.ConversationParticipantInfoResponse>"*/-->
        <div class="flex items-center justify-between mb-2">
            <h3 class="text-sm sm:text-base font-semibold text-gray-900"
                th:text="#{ui.participants.title}">
                Participants
            </h3>
            <span class="text-xs sm:text-sm text-gray-500"
                  th:text="#{ui.participants.count(${#lists.size(participants)})}">
                0 members
            </span>
        </div>

        <ul class="divide-y divide-gray-200 border border-gray-200 rounded-lg bg-white/80 max-h-64 overflow-y-auto">
            <li th:each="participant : ${participants}"
                class="px-3 py-2 sm:px-4 sm:py-2.5 flex items-center justify-between gap-3">
                <span class="font-medium text-gray-800 truncate"
                      th:title="${#messages.msgOrNull('conversation.user.role.' + participant.role.name() + '.description') ?: participant.role.getDescription()}"
                      th:text="|${participant.name}[${#messages.msgOrNull('conversation.user.role.' + participant.role.name()) ?: participant.role.name()}]|">
                  Name[MEMBER]
                </span>

                <!--/*@thymesVar id="nowRole" type="com.chat.server.common.constant.conversation.ConversationUserRole"*/-->
                <!--/*@thymesVar id="conversationId" type="com.chat.server.domain.vo.ConversationId"*/-->
                <!--/*@thymesVar id="user" type="com.chat.server.service.user.response.UserInfoResponse"*/-->
                <div th:if="${nowRole == T(com.chat.server.common.constant.conversation.ConversationUserRole).SUPER_ADMIN && user.id != participant.userId}">
                    <button type="button"
                            th:attr="hx-get=@{|/hx/conversations/groups/role/${conversationId}/${participant.userId}/modal|},
                                     aria-label=#{aria.participants.change_role_for(${participant.name})}"
                            hx-swap="none"
                            class="inline-flex items-center gap-2 text-xs sm:text-sm text-gray-700 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1 transition-colors"
                            th:text="#{button.change_role}">
                        Change Role
                    </button>
                </div>
            </li>
        </ul>
    </th:block>
</section>
</body>
</html>
