<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en"
      th:lang="${#locale.toLanguageTag()}">
<body>
<nav th:fragment="pagination(page, hrefBase, blockSize)"
     id="search-group-pagination"
     hx-swap-oob="true"
     class="mt-4 flex flex-wrap items-center justify-center gap-2 sm:gap-3"
     th:with="
        bs=${(blockSize != null && blockSize > 0) ? blockSize : 5},
        tp=${page.totalPages != null ? page.totalPages : 0},
        cur=${page.page},
        start=${(tp > 0) ? (cur - (cur % bs)) : 0},
        end=${(tp > 0) ? (((start + bs - 1) < (tp - 1)) ? (start + bs - 1) : (tp - 1)) : -1},
        prev=${(cur > 0) ? (cur - 1) : 0},
        next=${cur + 1}
     ">

    <!--/*@thymesVar id="page" type="com.chat.server.service.common.response.CustomPageResponse"*/-->
    <!--/*@thymesVar id="blockSize" type="java.lang.Integer"*/-->
    <!--/*@thymesVar id="hrefBase" type="java.lang.String"*/-->
    <th:block th:if="${page.totalElements == 0}">
        <button th:if="${page.hasPrevious}"
                th:attr="hx-get=${hrefBase + '&page=' + prev}"
                class="inline-flex items-center justify-center px-3.5 py-1.5 rounded-md text-sm sm:text-base bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
                th:text="#{button.prev}">
            « Prev
        </button>

        <button th:if="${page.hasNext}"
                th:attr="hx-get=${hrefBase + '&page=' + next}"
                class="inline-flex items-center justify-center px-3.5 py-1.5 rounded-md text-sm sm:text-base bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
                th:text="#{button.next}">
            Next »
        </button>
    </th:block>

    <th:block th:if="${page.totalElements != 0 && tp > 0}">
        <!-- Prev -->
        <button th:if="${page.hasPrevious}"
                th:attr="hx-get=${hrefBase + '&page=' + prev}"
                class="inline-flex items-center justify-center px-3.5 py-1.5 rounded-md text-sm sm:text-base bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
                th:text="#{button.prev}">
            « Prev
        </button>

        <!-- Numbered Pages -->
        <button th:each="i : ${#numbers.sequence(start, end)}"
                th:attr="hx-get=${hrefBase + '&page=' + i}"
                class="inline-flex items-center justify-center px-3.5 py-1.5 rounded-md text-sm sm:text-base transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
                th:classappend="${i == cur} ? ' bg-blue-600 text-white' : ' bg-gray-100 hover:bg-gray-200 text-gray-800'"
                th:text="${i + 1}">
            1
        </button>

        <!-- Next -->
        <button th:if="${page.hasNext}"
                th:attr="hx-get=${hrefBase + '&page=' + next}"
                class="inline-flex items-center justify-center px-3.5 py-1.5 rounded-md text-sm sm:text-base bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
                th:text="#{button.next}">
            Next »
        </button>
    </th:block>
</nav>
</body>
</html>
